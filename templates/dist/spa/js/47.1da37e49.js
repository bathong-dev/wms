(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[47],{a4be:function(t,a,e){"use strict";var s=e("a683"),n=e.n(s);a["default"]=n.a},a683:function(t,a){},cc62:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",[e("q-card",{directives:[{name:"show",rawName:"v-show",value:!t.fab,expression:"!fab"}],style:{width:t.width,height:t.height}},[e("q-card-section",[e("q-btn-group",{attrs:{push:""}},[e("q-btn",{attrs:{label:t.$t("refresh")},on:{click:function(a){return t.reFresh()}}}),e("q-btn",{attrs:{color:"purple",label:t.$t("stock.view_stocklist.cyclecountresult")},on:{click:function(a){return t.ConfirmCount()}}}),e("q-btn",[t._v(t._s(t.barscan))])],1)],1),e("q-scroll-area",{style:{height:t.scroll_height,width:t.width},attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle}},[e("q-markup-table",[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v(t._s(t.bin_name_label))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.goods_code_label))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.physical_label))]),e("th",{staticClass:"text-right"},[t._v(t._s(t.action_label))])])]),e("tbody",[t._l(t.table_list,(function(a,s){return e("tr",{key:s},[e("td",{staticClass:"text-left"},[t._v(t._s(a.bin_name))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.goods_code))]),e("td",{staticClass:"text-right"},[t._v(t._s(a.physical_inventory))]),e("td",{staticClass:"text-right"},[e("q-btn",{staticStyle:{width:"50px"},attrs:{round:"",flat:"",push:"",color:"purple",icon:"repeat"},on:{click:function(a){return t.repeatCount(s)}}})],1)])}))],2)])],1),e("q-separator",{attrs:{dark:""}})],1)],1)},n=[],o=e("3004"),i=e("18d6"),c=e("09f9"),r=e("e302"),l=(e("6527"),{name:"Pagezebra_cyclecount",data(){return{openid:"",login_name:"",authin:"0",pathname:"cyclecount/",separator:"cell",loading:!1,width:"",height:"",scroll_height:"",table_list:[],bin_name_label:this.$t("warehouse.view_binset.bin_name"),goods_code_label:this.$t("stock.view_stocklist.goods_code"),physical_label:this.$t("stock.view_stocklist.physical_inventory"),action_label:this.$t("action"),thumbStyle:{right:"4px",borderRadius:"5px",backgroundColor:"#E0E0E0",width:"5px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"#EEEEEE",width:"9px",opacity:.2},bin_scan:"",goods_scan:""}},methods:{datachange(){var t=this;i["a"].has("auth")&&Object(o["e"])("scanner/?bar_code="+t.barscan,{}).then((a=>{t.barscan=a.results[0].code,"BINSET"===a.results[0].mode?(t.bin_scan=a.results[0].code,t.goods_scan=""):"GOODS"===a.results[0].mode&&(t.goods_scan=a.results[0].code,t.countAdd(t.goods_scan))})).catch((a=>{t.$q.notify({message:a.detail,icon:"close",color:"negative"})}))},countAdd(t){var a=this;a.table_list.filter((function(e,s,n){e.bin_name===a.bin_scan&&e.goods_code===t&&(a.table_list[s].physical_inventory+=1)}))},getList(){var t=this;i["a"].has("auth")&&Object(o["e"])(t.pathname,{}).then((a=>{t.table_list=a.results})).catch((a=>{t.$q.notify({message:a.detail,icon:"close",color:"negative"})}))},reFresh(){var t=this;t.barscan="",t.bin_scan="",t.goods_scan="",t.getList()},repeatCount(t){var a=this;a.table_list[t].physical_inventory=0},ConfirmCount(){var t=this;i["a"].has("auth")&&Object(o["i"])(t.pathname,t.table_list).then((a=>{t.table_list=[],t.$q.notify({message:"Success Confirm Cycle Count",icon:"check",color:"green"})})).catch((a=>{t.$q.notify({message:a.detail,icon:"close",color:"negative"})}))}},created(){var t=this;i["a"].has("openid")?t.openid=i["a"].getItem("openid"):(t.openid="",i["a"].set("openid","")),i["a"].has("login_name")?t.login_name=i["a"].getItem("login_name"):(t.login_name="",i["a"].set("login_name","")),i["a"].has("auth")?t.authin="1":t.authin="0",t.datachange=Object(r["a"])(t.datachange,200)},mounted(){var t=this;t.width=1*c["a"].width+"px",t.height=c["a"].height-50+"px",t.scroll_height=c["a"].height-175+"px",t.barscan="",t.bin_scan="",t.goods_scan="",t.getList()},computed:{fab:{get(){return this.$store.state.fabchange.fab}},barscan:{get(){return console.log("scaned_cx",this.$store.state.bardata.barscan),this.$store.state.bardata.barscan},set(t){this.barscan="",console.log("scaned_cy",t),this.$store.commit("bardata/barScanned",t)}}},updated(){},beforeDestroy(){},destroyed(){}}),h=l,d=e("42e1"),b=e("a4be"),_=e("9989"),u=e("f09f"),g=e("a370"),p=e("e7a9"),m=e("9c40"),f=e("4983"),y=e("2bb1"),v=e("eb85"),w=e("eebe"),x=e.n(w),C=Object(d["a"])(h,s,n,!1,null,null,null);"function"===typeof b["default"]&&Object(b["default"])(C);a["default"]=C.exports;x()(C,"components",{QPage:_["a"],QCard:u["a"],QCardSection:g["a"],QBtnGroup:p["a"],QBtn:m["a"],QScrollArea:f["a"],QMarkupTable:y["a"],QSeparator:v["a"]})}}]);